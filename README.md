# Параметри Середовища розробки

Нижче наведена документація щодо параметрів середовища розробки, визначених у файлі `.env`. Ці параметри використовуються для налаштування та керування різними аспектами застосунку.

> [!CAUTION]
> Увага! Не залишайте свої реквізити у файлі `.env`, це небезпечно! Для цього використовуйте `.env.local`,
> цей файл знаходиться в `.gitignore`. Наприклад, в `.env` можна зберігати `CLIENT_SRC_DIR` і `SERVER_SRC_DIR`, всі параметри `DEPLOY_*`
> варто помістити в `.env.local`,

| Параметр            | Опис                                                                                        | Приклад                                   |
|---------------------|---------------------------------------------------------------------------------------------|-------------------------------------------|
| `HOST`              | Хост, на який налаштовується проксі для запуску клієнтських скриптів.                       | `http://example.com/`                     |
| `JS_DEBUG_KEY`      | Токен для налагодження (необов'язковий).                                                    | `dubug_token`                             |
| `CLIENT_SRC_DIR`    | Директорія, з якої беруться форми для компіляції. За замовчуванням `./client/src/forms`     | `./client/src/forms`                      |
| `SERVER_SRC_DIR`    | Директорія, з якої беруться об'єкти для компіляції. За замовчуванням `./server/src/objects` | `./server/src/objects`                    |
| `DEPLOY_HOSTS`      | Список хостів, на яких буде здійснюватися деплой. Хости розділяються знаком `;`.            | `https://example.com;https://google.com;` |

> [!NOTE]
> Збірка клієнтських скриптів організована таким чином, що всі файли з директорії, вказаної в `CLIENT_SRC_DIR`,
> використовуються як файли форм. Тут за іменем форми ядро буде шукати файли. Для того щоб кінцева збірка була
> оптимізованою, в цей каталог потрібно поміщати тільки файли форм. Всі утиліти та інші файли краще розміщати поза цим
> каталогом.

> [!NOTE]
> Збірка серверних скриптів організована таким чином, що всі файли з директорії, вказаної в `SERVER_SRC_DIR`,
> використовуються як файли об'єктів. Усі файли з цього каталогу використовуються як окремі файли об'єктів. Для того щоб
> кінцева збірка була оптимізованою, в цей каталог потрібно поміщати тільки файли об'єктів. Усі утиліти та інші файли
> краще розміщати поза цим каталогом.

---

# Команди проєкту

Нижче наведена документація щодо скриптів, визначених у файлі `package.json`. Ці скрипти призначені для керування
різними аспектами збірки, запуску та деплою застосунку.

| Команда                     | Опис                                                      |
|-----------------------------|-----------------------------------------------------------|
| `yarn build`                | збірка як клієнтської, так і серверної частин застосунку. |
| `yarn build-client`         | збірка клієнтської частини застосунку.                    |
| `yarn build-server`         | збірка серверної частини застосунку.                      |
| `yarn build-initial-script` | збірка ініціалізаційного скрипта.                         |

| Команда                      | Опис                                                                  |
|------------------------------|-----------------------------------------------------------------------|
| `yarn deploy`                | загальний скрипт для деплою застосунку.                               |
| `yarn deploy-client`         | деплой клієнтської частини застосунку та ресурсів.                    |
| `yarn deploy-server`         | деплой серверної частини застосунку.                                  |
| `yarn deploy-server-debug`   | деплой серверної частини та запуск деплою в налагоджувальному режимі. |
| `yarn deploy-initial-script` | деплой ініціалізаційного скрипта.                                     |

| Команда                   | Опис                                                              |
|---------------------------|-------------------------------------------------------------------|
| `yarn start-client`       | запуск клієнтської частини застосунку для розробки.               |
| `yarn start-client-debug` | запуск клієнтської частини застосунку в налагоджувальному режимі. |

| Команда                          | Опис                                                                     |
|----------------------------------|--------------------------------------------------------------------------|
| `yarn export-objects-partial`    | викачати об'єкти у JSON файли з застосуванням фільтра з конфігурації.    |
| `yarn export-forms-partial`      | викачати форми у JSON файли з застосуванням фільтра з конфігурації.      |
| `yarn export-application`        | викачати об'єкти та форми у JSON файли.                                  |
| `yarn export-functions-partial`  | викачати функції у JSON файли з застосуванням фільтра з конфігурації.    |
| `yarn export-subsystems-partial` | викачати сабсистеми у JSON файли з застосуванням фільтра з конфігурації. |

| Команда                 | Опис                                     |
|-------------------------|------------------------------------------|
| `yarn build-production` | підготовка та архівація продакшн збірки. |
| `yarn generate-jwk`     | генерація jwk для деплою                 |
| `npx d5-cli init-app`   | перша ініціалізація застосунку           |

---
